<div align="center">

# ğŸ¤– CCB Gateway

### ä¼ä¸šçº§å¤š AI ç¼–æ’å¹³å°

[![Stars](https://img.shields.io/github/stars/LeoLin990405/ai-router-ccb?style=social)](https://github.com/LeoLin990405/ai-router-ccb)
[![License](https://img.shields.io/github/license/LeoLin990405/ai-router-ccb?color=blue)](LICENSE)
[![Python](https://img.shields.io/badge/Python-3.9+-3776AB?logo=python&logoColor=white)](https://www.python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com)
[![Version](https://img.shields.io/badge/version-0.22--alpha-brightgreen)](https://github.com/LeoLin990405/ai-router-ccb/releases)

**Claude é€šè¿‡ç»Ÿä¸€çš„ Gateway API ç¼–æ’ 9 ä¸ª AI Providerï¼ŒåŒç³»ç»Ÿè®°å¿†æ¶æ„å’Œå®æ—¶ç›‘æ§**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨æ–‡æ¡£](#-ä½¿ç”¨æ–‡æ¡£) â€¢ [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„) â€¢ [API å‚è€ƒ](#-api-å‚è€ƒ)

[ğŸ‡ºğŸ‡¸ English](README.md) | [ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡](README.zh-CN.md)

<img src="screenshots/webui-demo.gif" alt="CCB Gateway æ¼”ç¤º" width="800">

</div>

---

## ğŸ“– ç›®å½•

- [æ¦‚è¿°](#-æ¦‚è¿°)
- [v0.22 æ–°ç‰¹æ€§](#-v022-æ–°ç‰¹æ€§)
- [ä¸ºä»€ä¹ˆé€‰æ‹© CCB Gateway](#-ä¸ºä»€ä¹ˆé€‰æ‹©-ccb-gateway)
- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æ–‡æ¡£](#-ä½¿ç”¨æ–‡æ¡£)
- [è®°å¿†ç³»ç»Ÿ](#-è®°å¿†ç³»ç»Ÿ-v020)
- [æŠ€èƒ½å‘ç°](#-æŠ€èƒ½å‘ç°)
- [å¤š AI è®¨è®º](#-å¤š-ai-è®¨è®º)
- [Web UI](#-web-ui)
- [API å‚è€ƒ](#-api-å‚è€ƒ)
- [æ–‡æ¡£èµ„æº](#-æ–‡æ¡£èµ„æº)
- [å¼€å‘è·¯çº¿](#-å¼€å‘è·¯çº¿)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [å¼€æºè®¸å¯](#-å¼€æºè®¸å¯)

---

## ğŸŒŸ æ¦‚è¿°

**CCB Gateway** æ˜¯ç”Ÿäº§çº§çš„å¤š AI ç¼–æ’å¹³å°ï¼Œ**Claude ä½œä¸ºæ™ºèƒ½ç¼–æ’è€…**ï¼Œé€šè¿‡ç»Ÿä¸€çš„ Gateway API å°†ä»»åŠ¡è·¯ç”±åˆ° 9 ä¸ªä¸“ä¸š AI Providerï¼Œæä¾›åŒç³»ç»Ÿè®°å¿†ã€ç¼“å­˜ã€é‡è¯•å’Œå®æ—¶ç›‘æ§åŠŸèƒ½ã€‚

**ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- ğŸ§  **åŒç³»ç»Ÿè®°å¿†** - System 1ï¼ˆå³æ—¶å½’æ¡£ï¼‰+ System 2ï¼ˆå¤œé—´æ•´åˆï¼‰
- ğŸ¯ **é¢„åŠ è½½ä¸Šä¸‹æ–‡** - 53 ä¸ª Skills + 9 ä¸ª Providers + 4 ä¸ª MCP Servers åµŒå…¥æ¯ä¸ªè¯·æ±‚
- ğŸ” **æŠ€èƒ½å‘ç°** - é€šè¿‡ Vercel Skills CLI è‡ªåŠ¨å‘ç°å’Œæ¨èç›¸å…³æŠ€èƒ½
- âš¡ **æ™ºèƒ½è·¯ç”±** - åŸºäºé€Ÿåº¦åˆ†çº§çš„è‡ªåŠ¨é™çº§å’Œæ™ºèƒ½ Provider é€‰æ‹©
- ğŸ“Š **å®æ—¶ç›‘æ§** - åŸºäº WebSocket çš„ä»ªè¡¨ç›˜å’Œå®æ—¶æŒ‡æ ‡
- ğŸ”„ **å¤š AI è®¨è®º** - å¤šä¸ª AI åä½œè§£å†³é—®é¢˜
- â˜ï¸ **äº‘ç«¯åŒæ­¥** - Google Drive å¤‡ä»½ï¼Œæ¯å°æ—¶è‡ªåŠ¨åŒæ­¥
- ğŸ”’ **å®‰å…¨åŠ å›º** - è·¯å¾„éå†é˜²æŠ¤ã€ç«æ€æ¡ä»¶ä¿®å¤

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Claude (Orchestrator)     â”‚
                    â”‚      Claude Code CLI        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                   â”‚                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ccb-cli         â”‚ â”‚ Gateway API â”‚ â”‚   Web UI          â”‚
    â”‚  ç›´æ¥è°ƒç”¨         â”‚ â”‚  REST/WS    â”‚ â”‚   ä»ªè¡¨ç›˜          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                  â”‚                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼          â–¼           â–¼           â–¼           â–¼         â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Kimi   â”‚ â”‚ Qwen   â”‚ â”‚DeepSeek â”‚ â”‚ Codex  â”‚ â”‚Gemini  â”‚ â”‚ iFlow  â”‚
     â”‚ ğŸš€ 7s  â”‚ â”‚ ğŸš€ 12s â”‚ â”‚ âš¡ 16s  â”‚ â”‚ ğŸ¢ 48s â”‚ â”‚ ğŸ¢ 71s â”‚ â”‚ âš¡ 25s â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Qoder   â”‚ â”‚OpenCode â”‚ â”‚ Claude  â”‚
                           â”‚ âš¡ 30s  â”‚ â”‚ âš¡ 42s  â”‚ â”‚ âš¡ 20s  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†• v0.22 æ–°ç‰¹æ€§

### å¯å‘å¼è®°å¿†æ£€ç´¢ â­

**åŸºäº Stanford Generative Agents çš„å¤šç»´è¯„åˆ†æ£€ç´¢**ï¼š

```
final_score = Î± Ã— ç›¸å…³æ€§ + Î² Ã— é‡è¦æ€§ + Î³ Ã— æ—¶æ•ˆæ€§

é»˜è®¤æƒé‡ï¼šÎ±=0.4, Î²=0.3, Î³=0.3
æ—¶é—´è¡°å‡ï¼šexp(-Î» Ã— è®¿é—®åå°æ—¶æ•°), Î»=0.1
```

| ç»´åº¦ | æ¥æº | æè¿° |
|------|------|------|
| **ç›¸å…³æ€§ (Relevance)** | FTS5 BM25 | å…³é”®è¯åŒ¹é…è´¨é‡ |
| **é‡è¦æ€§ (Importance)** | ç”¨æˆ·/LLM è¯„åˆ† | 0.0-1.0 é‡è¦æ€§åˆ†æ•° |
| **æ—¶æ•ˆæ€§ (Recency)** | è‰¾å®¾æµ©æ–¯æ›²çº¿ | åŸºäºæ—¶é—´è¡°å‡çš„è®¿é—®åˆ†æ•° |

### å¢å¼ºçš„ System 2 æ“ä½œ

| æ“ä½œ | æè¿° | è§¦å‘å‘½ä»¤ |
|------|------|----------|
| **è¡°å‡ (Decay)** | åº”ç”¨è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ | `ccb-consolidate decay` |
| **åˆå¹¶ (Merge)** | åˆå¹¶ç›¸ä¼¼è®°å¿† (>90% ç›¸ä¼¼åº¦) | `ccb-consolidate merge` |
| **æŠ½è±¡ (Abstract)** | LLM ä»è®°å¿†ç»„ç”Ÿæˆæ‘˜è¦ | `ccb-consolidate abstract` |
| **é—å¿˜ (Forget)** | ç§»é™¤ä½äºé˜ˆå€¼çš„è®°å¿† | `ccb-consolidate forget` |

### æ–°å¢æ•°æ®åº“è¡¨

```sql
-- é‡è¦æ€§è¿½è¸ª
CREATE TABLE memory_importance (
    memory_id TEXT PRIMARY KEY,
    importance_score REAL DEFAULT 0.5,
    last_accessed_at DATETIME,
    access_count INTEGER DEFAULT 0,
    decay_rate REAL DEFAULT 0.1
);

-- è®¿é—®æ—¥å¿—ï¼ˆç”¨äºæ—¶æ•ˆæ€§è®¡ç®—ï¼‰
CREATE TABLE memory_access_log (
    memory_id TEXT, memory_type TEXT,
    accessed_at DATETIME, access_context TEXT
);

-- System 2 åˆå¹¶å®¡è®¡æ—¥å¿—
CREATE TABLE consolidation_log (
    consolidation_type TEXT,  -- 'merge' | 'abstract' | 'forget'
    source_ids TEXT, result_id TEXT
);
```

### æ–°å¢ CLI å‘½ä»¤

```bash
# å¯å‘å¼æœç´¢ï¼ˆå¸¦è¯„åˆ†ï¼‰
ccb-mem search-scored "æŸ¥è¯¢" --limit 10

# è®¾ç½®è®°å¿†é‡è¦æ€§
ccb-mem importance <id> 0.8

# åº”ç”¨æ—¶é—´è¡°å‡
ccb-mem decay --all

# æ ‡è®°é—å¿˜
ccb-mem forget <id>

# æŸ¥çœ‹ v2 ç»Ÿè®¡
ccb-mem stats-v2

# System 2 åˆå¹¶ CLI
ccb-consolidate nightly        # å®Œæ•´åˆå¹¶æµç¨‹
ccb-consolidate decay          # å¯¹æ‰€æœ‰è®°å¿†åº”ç”¨è¡°å‡
ccb-consolidate merge          # åˆå¹¶ç›¸ä¼¼è®°å¿†
ccb-consolidate abstract       # ç”ŸæˆæŠ½è±¡æ‘˜è¦
ccb-consolidate forget         # æ¸…ç†è¿‡æœŸè®°å¿†
ccb-consolidate stats          # æŸ¥çœ‹åˆå¹¶ç»Ÿè®¡
```

### é…ç½®

**`~/.ccb/heuristic_config.json`ï¼š**
```json
{
  "retrieval": {
    "relevance_weight": 0.4,
    "importance_weight": 0.3,
    "recency_weight": 0.3,
    "decay_rate": 0.1,
    "candidate_pool_size": 50,
    "final_limit": 5
  },
  "importance": {
    "default_score": 0.5,
    "user_marked_boost": 0.3
  },
  "decay": {
    "lambda": 0.1,
    "min_score": 0.01,
    "max_age_days": 90
  },
  "system2": {
    "merge_similarity_threshold": 0.9,
    "abstract_group_min_size": 5,
    "forget_score_threshold": 0.01,
    "forget_age_days": 90
  }
}
```

---

## ğŸ“¦ v0.21 ç‰¹æ€§ï¼ˆä¸Šä¸ªç‰ˆæœ¬ï¼‰

### è®°å¿†é€æ˜åº¦ä¸å†™å…¥ API

**åœ¨ v0.20 åŒç³»ç»Ÿæ¶æ„åŸºç¡€ä¸Š**å¢åŠ äº†é€æ˜åº¦ã€å†™å…¥ API å’Œ LLM é›†æˆï¼š

| åŠŸèƒ½ | æè¿° |
|------|------|
| **è®°å¿†é€æ˜åº¦** | è¿½è¸ªå“ªäº›è®°å¿†å½±å“äº†æ¯ä¸ªè¯·æ±‚ |
| **Observations CRUD** | æ‰‹åŠ¨è®°å¿†ç®¡ç†ï¼Œæ”¯æŒåˆ†ç±»å’Œç½®ä¿¡åº¦ |
| **LLM åˆå¹¶å™¨** | åˆå¹¶æ—¶ AI é©±åŠ¨çš„æ´å¯Ÿæå– |
| **é…ç½® API** | è¿è¡Œæ—¶é…ç½®è®°å¿†æ³¨å…¥è¡Œä¸º |
| **æŠ€èƒ½åé¦ˆ** | è¯„åˆ†ç³»ç»Ÿæ”¹è¿›æŠ€èƒ½æ¨è |
| **è®¨è®ºè®°å¿†** | å°†å¤š AI è®¨è®ºæŒä¹…åŒ–åˆ°è®°å¿†ç³»ç»Ÿ |

---

## ğŸ“¦ v0.20 ç‰¹æ€§ï¼ˆæ›´æ—©ç‰ˆæœ¬ï¼‰

### åŒç³»ç»Ÿè®°å¿†æ¶æ„

**çµæ„Ÿæ¥è‡ªäººç±»è®¤çŸ¥** - å¿«é€Ÿè‡ªåŠ¨æ•è· + æ·±åº¦å¤œé—´å¤„ç†ï¼š

| ç³»ç»Ÿ | é€Ÿåº¦ | ç”¨é€” | å­˜å‚¨ä½ç½® |
|------|------|------|----------|
| **System 1** | âš¡ å³æ—¶ | `/clear` æˆ– `/compact` æ—¶è‡ªåŠ¨å½’æ¡£ | `~/.ccb/context_archive/*.md` |
| **System 2** | ğŸŒ™ å¤œé—´ | æ•´åˆæ´å¯Ÿä¸ºé•¿æœŸè®°å¿† | `~/.ccb/memories/*.md` |

### æ–°åŠŸèƒ½

- ğŸ§  **Context Saver** - è‡ªåŠ¨å°†ä¼šè¯ä¸Šä¸‹æ–‡ä¿å­˜ä¸º Markdown
- ğŸ“š **Memory Consolidator** - å¤œé—´å¤„ç†ç”Ÿæˆç»“æ„åŒ–é•¿æœŸè®°å¿†
- ğŸ”§ **ccb-mem CLI** - æ–°çš„ç»Ÿä¸€è®°å¿†ç®¡ç†å·¥å…·
- ğŸ”’ **å®‰å…¨ä¿®å¤** - é™æ€æ–‡ä»¶æœåŠ¡ä¸­çš„è·¯å¾„éå†é˜²æŠ¤
- ğŸ› **ç«æ€æ¡ä»¶ä¿®å¤** - è¯·æ±‚é˜Ÿåˆ—ä¸­çš„è¶…æ—¶å¤„ç†
- ğŸ¤– **Claude Provider** - ä½œä¸ºç¬¬ 9 ä¸ª Provider é€‰é¡¹æ·»åŠ 

### å‘½ä»¤

```bash
# ä¿å­˜å½“å‰ä¼šè¯
ccb-mem save

# æ•´åˆæœ€è¿‘çš„ä¼šè¯ï¼ˆ24 å°æ—¶å†…ï¼‰
ccb-mem consolidate --hours 24

# æœç´¢è®°å¿†å½’æ¡£
ccb-mem search "React hooks"

# åˆ—å‡ºæœ€è¿‘çš„å½’æ¡£
ccb-mem list

# æ³¨å…¥è®°å¿†åˆ°æ–°å¯¹è¯
ccb-mem inject 2026-02-05
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆé€‰æ‹© CCB Gateway

<table>
<tr>
<td width="50%">

### é—®é¢˜

âŒ å¤šä¸ª AI CLI æ¥å£ä¸ç»Ÿä¸€
âŒ æ‰‹åŠ¨é€‰æ‹© Provider ç¹ç
âŒ å¯¹è¯ä¹‹é—´æ²¡æœ‰è®°å¿†
âŒ ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼ŒAI ä¸çŸ¥é“å¯ç”¨å·¥å…·
âŒ æ— æ³•è§‚å¯Ÿæ“ä½œè¿‡ç¨‹
âŒ AI ä¹‹é—´æ— æ³•åä½œ
âŒ å¤±è´¥è¯·æ±‚æµªè´¹æ—¶é—´

</td>
<td width="50%">

### è§£å†³æ–¹æ¡ˆ

âœ… **ç»Ÿä¸€ Gateway API** - ä¸€ä¸ªæ¥å£è°ƒç”¨æ‰€æœ‰
âœ… **æ™ºèƒ½è·¯ç”±** - è‡ªåŠ¨é€‰æ‹©æœ€ä½³ AI
âœ… **åŒç³»ç»Ÿè®°å¿†** - å¿«é€Ÿ + æ·±åº¦å¤„ç†
âœ… **é¢„åŠ è½½å·¥å…·** - 53 ä¸ª Skills åµŒå…¥
âœ… **å®æ—¶ä»ªè¡¨ç›˜** - å®Œå…¨å¯è§‚æµ‹
âœ… **å¤š AI è®¨è®º** - åä½œå¼ AI
âœ… **é‡è¯•ä¸é™çº§** - å†…ç½®å¼¹æ€§

</td>
</tr>
</table>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ§  åŒç³»ç»Ÿè®°å¿† (v0.22)

**ä»¿äººç±»è®°å¿†æ¶æ„** - å¿«é€Ÿè‡ªåŠ¨æ•è·ä¸æ·±åº¦å¤œé—´å¤„ç†ç›¸ç»“åˆï¼Œç°å·²æ”¯æŒ**å¯å‘å¼æ£€ç´¢**ã€‚

<details>
<summary><b>å¯å‘å¼æ£€ç´¢ï¼ˆv0.22 æ–°å¢ï¼‰</b></summary>

**åŸºäº Stanford Generative Agents çš„ä¸‰ç»´è¯„åˆ†**ï¼š

```
final_score = Î± Ã— ç›¸å…³æ€§ + Î² Ã— é‡è¦æ€§ + Î³ Ã— æ—¶æ•ˆæ€§
```

- **ç›¸å…³æ€§ (Î±=0.4)**ï¼šFTS5 BM25 å…³é”®è¯åŒ¹é…åˆ†æ•°
- **é‡è¦æ€§ (Î²=0.3)**ï¼šç”¨æˆ·è¯„åˆ†æˆ– LLM è¯„ä¼°çš„é‡è¦æ€§ (0.0-1.0)
- **æ—¶æ•ˆæ€§ (Î³=0.3)**ï¼šè‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ï¼š`exp(-0.1 Ã— è®¿é—®åå°æ—¶æ•°)`

**æ£€ç´¢ç¤ºä¾‹ï¼š**
```bash
# å¯å‘å¼è¯„åˆ†æœç´¢
ccb-mem search-scored "è®¤è¯" --limit 5

# è¾“å‡ºæ˜¾ç¤ºæ‰€æœ‰ç»´åº¦ï¼š
# ID: 123 | Score: 0.82 | R: 0.95 | I: 0.80 | T: 0.65
# ID: 456 | Score: 0.71 | R: 0.80 | I: 0.70 | T: 0.60
```

</details>

<details>
<summary><b>System 1: Context Saverï¼ˆç‚¹å‡»å±•å¼€ï¼‰</b></summary>

**å³æ—¶è‡ªåŠ¨å½’æ¡£** - å½“ä½ è¿è¡Œ `/clear` æˆ– `/compact` æ—¶è§¦å‘ï¼š

```
ä¼šè¯å¼€å§‹ â†’ å·¥ä½œ â†’ è§¦å‘ /clear
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Context Saver        â”‚
        â”‚   (System 1 - å¿«é€Ÿ)    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ è§£æ session.jsonl   â”‚
        â”‚ â€¢ æå–å…³é”®æ¶ˆæ¯         â”‚
        â”‚ â€¢ æ±‡æ€»å·¥å…·è°ƒç”¨         â”‚
        â”‚ â€¢ è¿½è¸ªæ–‡ä»¶å˜æ›´         â”‚
        â”‚ â€¢ ä¿å­˜ä¸º Markdown      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        ~/.ccb/context_archive/
        session_abc123_2026-02-05.md
```

**å½’æ¡£æ ¼å¼ï¼š**
```markdown
# Session: abc123
- **é¡¹ç›®**: /Users/leo/project
- **æ—¶é•¿**: 45 åˆ†é’Ÿ
- **æ¨¡å‹**: claude-opus-4-5

## ä»»åŠ¡æ‘˜è¦
å®ç°äº† JWT ç”¨æˆ·è®¤è¯...

## å…³é”®æ¶ˆæ¯
- ç”¨æˆ·: "æ·»åŠ ç™»å½•åŠŸèƒ½"
- åŠ©æ‰‹: åˆ›å»ºäº†è®¤è¯æ¨¡å—...

## å·¥å…·è°ƒç”¨
| å·¥å…· | æ¬¡æ•° |
|------|------|
| Edit | 15 |
| Read | 8 |
| Bash | 5 |

## æ–‡ä»¶å˜æ›´
- `src/auth.ts` - åˆ›å»º
- `src/middleware.ts` - ä¿®æ”¹
```

</details>

<details>
<summary><b>System 2: Memory Consolidatorï¼ˆç‚¹å‡»å±•å¼€ï¼‰</b></summary>

**å¤œé—´æ·±åº¦å¤„ç†** - è‡ªåŠ¨è¿è¡Œæˆ–æŒ‰éœ€è§¦å‘ï¼š

```
å¤œé—´ï¼ˆå‡Œæ™¨ 3 ç‚¹ï¼‰æˆ–æ‰‹åŠ¨è§¦å‘
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Memory Consolidator             â”‚
â”‚      (System 2 - æ·±åº¦)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æ”¶é›†æœ€è¿‘çš„å½’æ¡£                    â”‚
â”‚ 2. æŒ‰é¡¹ç›®/ä¸»é¢˜èšç±»                   â”‚
â”‚ 3. æå–æ¨¡å¼å’Œå­¦ä¹                     â”‚
â”‚ 4. ç”Ÿæˆç»“æ„åŒ–è®°å¿†                    â”‚
â”‚ 5. ä¿å­˜åˆ°é•¿æœŸå­˜å‚¨                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
        ~/.ccb/memories/
        2026-02-05_consolidated.md
```

**æ•´åˆè®°å¿†æ ¼å¼ï¼š**
```markdown
# è®°å¿†: 2026-02-05

## å·¥ä½œé¡¹ç›®
### /Users/leo/ccb-gateway
- ä¼šè¯æ•°: 3
- æ—¶é•¿: 2 å°æ—¶ 15 åˆ†
- é‡ç‚¹: è®°å¿†ç³»ç»Ÿå®ç°

### /Users/leo/web-app
- ä¼šè¯æ•°: 2
- æ—¶é•¿: 1 å°æ—¶ 30 åˆ†
- é‡ç‚¹: React ç»„ä»¶é‡æ„

## å…³é”®å­¦ä¹ 
1. SQLite FTS5 éœ€è¦å†…å®¹åŒæ­¥è§¦å‘å™¨
2. å¼‚æ­¥è¶…æ—¶å¤„ç†ä¸­çš„ç«æ€æ¡ä»¶
3. è·¯å¾„éå†é˜²æŠ¤æ¨¡å¼

## å¸¸ç”¨å·¥å…·
| å·¥å…· | æ¬¡æ•° | é¡¹ç›®æ•° |
|------|------|--------|
| Edit | 45 | 2 |
| Read | 32 | 2 |
| Bash | 18 | 1 |

## æŠ€æœ¯å†³ç­–
- é€‰æ‹© Markdown è€Œé JSON ä»¥æé«˜å¯è¯»æ€§
- åŒç³»ç»Ÿæ¶æ„æé«˜è®°å¿†æ•ˆç‡
```

</details>

<details>
<summary><b>è®°å¿†æ³¨å…¥</b></summary>

**è‡ªåŠ¨æ³¨å…¥ç›¸å…³è®°å¿†**åˆ°æ–°å¯¹è¯ï¼š

```bash
# ä½¿ç”¨æ˜¨å¤©çš„è®°å¿†å¯åŠ¨æ–°ä¼šè¯
claude --context $(ccb-mem inject 2026-02-04)

# æˆ–æ‰‹åŠ¨é€šè¿‡ @
@~/.ccb/memories/2026-02-04_consolidated.md
```

Gateway ä¸­é—´ä»¶ä¹Ÿå¯ä»¥è‡ªåŠ¨æ³¨å…¥ï¼š
```json
{
  "memory": {
    "enabled": true,
    "auto_inject_recent": true,
    "inject_days": 3
  }
}
```

</details>

**ä½¿ç”¨æ–¹å¼ï¼š**
```bash
# è‡ªåŠ¨ - é’©å­åœ¨ /clear æ—¶è§¦å‘
# ä¼šè¯è‡ªåŠ¨ä¿å­˜åˆ° ~/.ccb/context_archive/

# æ‰‹åŠ¨ä¿å­˜
ccb-mem save

# æ•´åˆæœ€è¿‘ 24 å°æ—¶
ccb-mem consolidate --hours 24

# æœç´¢æ‰€æœ‰è®°å¿†
ccb-mem search "è®¤è¯"

# åˆ—å‡ºæœ€è¿‘å½’æ¡£
ccb-mem list
```

---

### âš¡ æ™ºèƒ½è·¯ç”±ä¸é™çº§

**åŸºäºé€Ÿåº¦åˆ†çº§çš„ Provider é“¾**ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨é™çº§ï¼š

```yaml
å¿«é€Ÿå±‚ï¼ˆ3-15ç§’ï¼‰ï¼š   Kimi â†’ Qwen â†’ DeepSeek
ä¸­é€Ÿå±‚ï¼ˆ15-45ç§’ï¼‰ï¼š  iFlow â†’ Qoder â†’ OpenCode â†’ Claude
æ…¢é€Ÿå±‚ï¼ˆ45-90ç§’ï¼‰ï¼š  Codex â†’ Gemini
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ¯ åŸºäºä»»åŠ¡å…³é”®è¯çš„æ™ºèƒ½ Provider æ¨è
- ğŸ”„ æŒ‡æ•°é€€é¿çš„è‡ªåŠ¨é‡è¯•
- ğŸ“‰ å¼¹æ€§é™çº§é“¾
- âš–ï¸ è·¨ Provider è´Ÿè½½å‡è¡¡

---

### ğŸ” æŠ€èƒ½å‘ç°

**è‡ªåŠ¨å‘ç°å’Œæ¨èç›¸å…³ Claude Code Skills** - é›†æˆ [Vercel Skills](https://github.com/vercel-labs/skills)ã€‚

```
ç”¨æˆ·è¯·æ±‚ â†’ æå–å…³é”®è¯ â†’ æœç´¢æŠ€èƒ½ï¼ˆæœ¬åœ° + è¿œç¨‹ï¼‰
                               â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                  â”‚
         scan-skills.sh              npx skills find [query]
         ï¼ˆæœ¬åœ°æŠ€èƒ½ï¼‰                  ï¼ˆVercel ä»“åº“ï¼‰
              â”‚                                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
                   æ³¨å…¥æ¨èåˆ°ä¸Šä¸‹æ–‡
```

**ä½¿ç”¨æ–¹å¼ï¼š**
```bash
# Gateway è‡ªåŠ¨å‘ç°æŠ€èƒ½
ccb-cli kimi "å¸®æˆ‘åˆ›å»º PDF"
# [MemoryMiddleware] ğŸ’¡ å‘ç° 1 ä¸ªç›¸å…³ Skill: /pdf

# æ‰‹åŠ¨æœç´¢
ccb-skills recommend "åˆ›å»ºç”µå­è¡¨æ ¼"
ccb-skills stats
```

---

### ğŸ¤ å¤š AI è®¨è®º

**åä½œå¼é—®é¢˜è§£å†³** - å¤šä¸ª AI è®¨è®ºå¹¶è¾¾æˆå…±è¯†ï¼š

```bash
ccb-submit discuss \
  --providers kimi,codex,gemini \
  --rounds 3 \
  --strategy "consensus" \
  "è®¾è®¡å¯æ‰©å±•çš„å¾®æœåŠ¡æ¶æ„"
```

**èšåˆç­–ç•¥ï¼š**
- **consensus** - æ‰€æœ‰ AI å¿…é¡»åŒæ„
- **majority** - å¤šæ•°ç­”æ¡ˆè·èƒœ
- **first_success** - ç¬¬ä¸€ä¸ªæœ‰æ•ˆå“åº”
- **best_quality** - æœ€é«˜è´¨é‡ï¼ˆè¯„åˆ†ï¼‰

---

### ğŸ“Š å®æ—¶ç›‘æ§

**åŸºäº WebSocket çš„ä»ªè¡¨ç›˜**ï¼Œå®æ—¶æ›´æ–°ï¼šhttp://localhost:8765/web

<table>
<tr>
<td width="33%">

**æŒ‡æ ‡**
- è¯·æ±‚æ•°é‡
- æˆåŠŸç‡
- å¹³å‡å»¶è¿Ÿ
- Provider çŠ¶æ€

</td>
<td width="33%">

**é˜Ÿåˆ—**
- å¾…å¤„ç†è¯·æ±‚
- å¤„ç†ä¸­
- å·²å®Œæˆ
- å¤±è´¥

</td>
<td width="33%">

**æ—¥å¿—**
- å®æ—¶äº‹ä»¶
- é”™è¯¯è¿½è¸ª
- æ€§èƒ½æ•°æ®
- WebSocket æ¨é€

</td>
</tr>
</table>

---

### ğŸš€ ç”Ÿäº§çº§åŠŸèƒ½

<table>
<tr>
<td width="50%">

**æ€§èƒ½**
- âš¡ å“åº”ç¼“å­˜ï¼ˆå¯é…ç½® TTLï¼‰
- ğŸ”„ æŒ‡æ•°é€€é¿é‡è¯•
- ğŸ“Š æ¯ä¸ª Provider çš„é€Ÿç‡é™åˆ¶
- ğŸ¯ å¹¶è¡Œæ‰§è¡Œ

</td>
<td width="50%">

**å¯é æ€§**
- ğŸ›¡ï¸ è‡ªåŠ¨é™çº§é“¾
- ğŸ’¾ æŒä¹…åŒ–è¯·æ±‚é˜Ÿåˆ—
- ğŸ“ å®Œæ•´æ—¥å¿—
- ğŸ” åŸºäº ID çš„è¯·æ±‚è¿½è¸ª

</td>
</tr>
<tr>
<td width="50%">

**å®‰å…¨æ€§**
- ğŸ” API Key è®¤è¯
- ğŸš¦ é€Ÿç‡é™åˆ¶
- ğŸ”’ è·¯å¾„éå†é˜²æŠ¤
- ğŸ“‹ å®¡è®¡æ—¥å¿—

</td>
<td width="50%">

**å¯è§‚æµ‹æ€§**
- ğŸ“Š Prometheus æŒ‡æ ‡
- ğŸ“ˆ å®æ—¶ä»ªè¡¨ç›˜
- ğŸ”” WebSocket äº‹ä»¶
- ğŸ“‹ è¯¦ç»†è¯·æ±‚æ—¥å¿—

</td>
</tr>
</table>

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ç³»ç»Ÿæ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CCB Gateway (v0.22)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            åŒç³»ç»Ÿè®°å¿† (v0.22)                           â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  System 1 (å¿«é€Ÿ):          System 2 (æ·±åº¦):             â”‚    â”‚
â”‚  â”‚  â€¢ ContextSaver            â€¢ MemoryConsolidator         â”‚    â”‚
â”‚  â”‚  â€¢ /clear æ—¶è‡ªåŠ¨è§¦å‘       â€¢ å¤œé—´å¤„ç†                   â”‚    â”‚
â”‚  â”‚  â€¢ Markdown å½’æ¡£           â€¢ é•¿æœŸè®°å¿†                   â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚            Gateway Server æ ¸å¿ƒ                        â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  â€¢ è¯·æ±‚é˜Ÿåˆ—ï¼ˆå¼‚æ­¥ï¼‰                                   â”‚      â”‚
â”‚  â”‚  â€¢ é‡è¯•æ‰§è¡Œå™¨                                         â”‚      â”‚
â”‚  â”‚  â€¢ ç¼“å­˜ç®¡ç†å™¨                                         â”‚      â”‚
â”‚  â”‚  â€¢ é€Ÿç‡é™åˆ¶å™¨                                         â”‚      â”‚
â”‚  â”‚  â€¢ æŒ‡æ ‡æ”¶é›†å™¨                                         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â–¼           â–¼           â–¼           â–¼           â–¼            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚Kimi â”‚   â”‚Qwen â”‚   â”‚DeepSeek â”‚  â”‚Codexâ”‚   â”‚Claude â”‚   ...  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®°å¿†ç³»ç»Ÿæµç¨‹

```
ä¼šè¯æ´»åŠ¨
    â”‚
    â”œâ”€â†’ [System 1: Context Saver]
    â”‚   â”œâ”€â†’ ç”± /clear æˆ– /compact è§¦å‘
    â”‚   â”œâ”€â†’ è§£æ session.jsonl
    â”‚   â”œâ”€â†’ æå–å…³é”®æ¶ˆæ¯å’Œå·¥å…·è°ƒç”¨
    â”‚   â””â”€â†’ ä¿å­˜åˆ° ~/.ccb/context_archive/
    â”‚
    â””â”€â†’ [System 2: Memory Consolidator]
        â”œâ”€â†’ å¤œé—´ï¼ˆå‡Œæ™¨ 3 ç‚¹ï¼‰æˆ–æ‰‹åŠ¨è¿è¡Œ
        â”œâ”€â†’ æ”¶é›†æœ€è¿‘çš„å½’æ¡£
        â”œâ”€â†’ æŒ‰é¡¹ç›®/ä¸»é¢˜èšç±»
        â”œâ”€â†’ æå–æ¨¡å¼å’Œå­¦ä¹ 
        â””â”€â†’ ä¿å­˜åˆ° ~/.ccb/memories/
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

- Python 3.9+
- Node.js 16+ï¼ˆç”¨äº MCP serversï¼‰
- Git

### å®‰è£…

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/LeoLin990405/ai-router-ccb.git
cd ai-router-ccb

# 2. å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# 3. å®‰è£… Node.js ä¾èµ–ï¼ˆç”¨äº MCPï¼‰
npm install

# 4. é…ç½® AI Providers
# ç¼–è¾‘ ~/.claude/ ä¸­çš„é…ç½®æ–‡ä»¶æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡
```

### å¯åŠ¨ Gateway Server

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
python3 -m lib.gateway.gateway_server --port 8765

# è¾“å‡ºï¼š
# [SystemContext] Preloading system information...
# [SystemContext] Loaded 53 skills
# [SystemContext] Loaded 9 providers
# [SystemContext] Loaded 4 MCP servers
# [MemoryMiddleware] Initialized (enabled=True)
# âœ“ Server running at http://localhost:8765
```

### ç¬¬ä¸€ä¸ªè¯·æ±‚

```bash
# ä½¿ç”¨ ccb-cliï¼ˆè‡ªåŠ¨è®°å¿†ï¼ï¼‰
ccb-cli kimi "è§£é‡Š React Hooks"

# ä½¿ç”¨ curl
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "kimi",
    "message": "è§£é‡Š React Hooks",
    "wait": true,
    "timeout": 60
  }'
```

---

## ğŸ“š ä½¿ç”¨æ–‡æ¡£

### ccb-cli - ç›´æ¥ CLI

**è°ƒç”¨ä»»ä½• AI Provider çš„æœ€å¿«æ–¹å¼ï¼š**

```bash
# åŸºæœ¬ç”¨æ³•
ccb-cli <provider> [model] "<message>"

# ç¤ºä¾‹
ccb-cli kimi "å¦‚ä½•ä¼˜åŒ– SQL æŸ¥è¯¢ï¼Ÿ"
ccb-cli codex o3 "è¯æ˜åœæœºé—®é¢˜ä¸å¯åˆ¤å®š"
ccb-cli gemini 3f "è®¾è®¡å“åº”å¼å¯¼èˆªæ "
ccb-cli claude "å®¡æŸ¥è¿™æ®µä»£ç "

# ä½¿ç”¨ Agent è§’è‰²
ccb-cli codex o3 -a reviewer "å®¡æŸ¥è¿™ä¸ª PR"
ccb-cli kimi -a sisyphus "ä¿®å¤è¿™ä¸ª bug: ..."
```

**æ¨¡å‹å¿«æ·æ–¹å¼ï¼š**
| Provider | å¿«æ·æ–¹å¼ | ç¤ºä¾‹ |
|----------|----------|------|
| codex | o3, o4-mini, gpt-4o, o1-pro | `ccb-cli codex o3 "..."` |
| gemini | 3f, 3p, 2.5f, 2.5p | `ccb-cli gemini 3f "..."` |
| kimi | thinking, normal | `ccb-cli kimi thinking "..."` |
| deepseek | reasoner, chat | `ccb-cli deepseek reasoner "..."` |
| claude | - | `ccb-cli claude "..."` |

### ccb-mem - è®°å¿†ç®¡ç†

```bash
# ä¿å­˜å½“å‰ä¼šè¯
ccb-mem save

# ä¿å­˜æŒ‡å®šä¼šè¯
ccb-mem save /path/to/session.jsonl

# æ•´åˆæœ€è¿‘çš„ä¼šè¯
ccb-mem consolidate --hours 24

# æœç´¢è®°å¿†
ccb-mem search "è®¤è¯"

# åˆ—å‡ºæœ€è¿‘å½’æ¡£
ccb-mem list

# è·å–æŒ‡å®šæ—¥æœŸçš„æ³¨å…¥è·¯å¾„
ccb-mem inject 2026-02-05
```

---

## ğŸ§  è®°å¿†ç³»ç»Ÿ (v0.22)

### åŒç³»ç»Ÿæ¶æ„

è®°å¿†ç³»ç»Ÿçµæ„Ÿæ¥è‡ªäººç±»è®¤çŸ¥ï¼š

| ç³»ç»Ÿ | ç±»æ¯” | è§¦å‘ | è¾“å‡º |
|------|------|------|------|
| **System 1** | çŸ­æœŸè®°å¿† | `/clear`, `/compact` | Markdown å½’æ¡£ |
| **System 2** | é•¿æœŸè®°å¿† | å¤œé—´å®šæ—¶ä»»åŠ¡ | æ•´åˆè®°å¿† |

### å¯å‘å¼æ£€ç´¢ï¼ˆæ–°å¢ï¼‰

v0.22 å¼•å…¥äº†**åŸºäº Stanford Generative Agents çš„æ£€ç´¢**ï¼š

```
final_score = Î± Ã— ç›¸å…³æ€§ + Î² Ã— é‡è¦æ€§ + Î³ Ã— æ—¶æ•ˆæ€§
```

| å‚æ•° | é»˜è®¤å€¼ | æè¿° |
|------|--------|------|
| Î± (ç›¸å…³æ€§) | 0.4 | FTS5 BM25 åˆ†æ•°æƒé‡ |
| Î² (é‡è¦æ€§) | 0.3 | ç”¨æˆ·/LLM é‡è¦æ€§æƒé‡ |
| Î³ (æ—¶æ•ˆæ€§) | 0.3 | æ—¶é—´è¡°å‡æƒé‡ |
| Î» (è¡°å‡ç‡) | 0.1 | è‰¾å®¾æµ©æ–¯æ›²çº¿å‚æ•° |

### æ–‡ä»¶ä½ç½®

```
~/.ccb/
â”œâ”€â”€ context_archive/          # System 1 è¾“å‡º
â”‚   â”œâ”€â”€ session_abc_2026-02-05.md
â”‚   â”œâ”€â”€ session_def_2026-02-05.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ memories/                  # System 2 è¾“å‡º
â”‚   â”œâ”€â”€ 2026-02-04_consolidated.md
â”‚   â”œâ”€â”€ 2026-02-05_consolidated.md
â”‚   â””â”€â”€ ...
â””â”€â”€ ccb_memory.db             # Gateway ä¸­é—´ä»¶çš„ SQLite
```

### é…ç½®

**`~/.ccb/gateway_config.json`ï¼š**
```json
{
  "memory": {
    "enabled": true,
    "auto_inject": true,
    "auto_record": true,
    "inject_system_context": true,
    "max_injected_memories": 5
  },
  "dual_system": {
    "system1_enabled": true,
    "system2_enabled": true,
    "consolidate_hour": 3,
    "retention_days": 30
  }
}
```

---

## ğŸ–¥ï¸ Web UI

**å®æ—¶ç›‘æ§ä»ªè¡¨ç›˜ï¼šhttp://localhost:8765/web**

### åŠŸèƒ½

- ğŸ“Š **å®æ—¶æŒ‡æ ‡** - è¯·æ±‚æ•°ã€æˆåŠŸç‡ã€å»¶è¿Ÿ
- ğŸ§  **è®°å¿†ç®¡ç†** - åŸºäºä¼šè¯çš„å¯¹è¯å†å²ï¼Œæ”¯æŒå…¨æ–‡æœç´¢
- ğŸ› ï¸ **æŠ€èƒ½å‘ç°** - ä¸ºä½ çš„ä»»åŠ¡æŸ¥æ‰¾å’Œæ¨èç›¸å…³æŠ€èƒ½
- ğŸ“‹ **è¯·æ±‚é˜Ÿåˆ—** - å¾…å¤„ç†ã€å¤„ç†ä¸­ã€å·²å®Œæˆ
- ğŸ”´ **å®æ—¶æ—¥å¿—** - é€šè¿‡ WebSocket å®æ—¶äº‹ä»¶æµ
- ğŸ¤– **Provider çŠ¶æ€** - æ‰€æœ‰ 9 ä¸ª Provider çš„å¥åº·æ£€æŸ¥
- ğŸ“ˆ **å›¾è¡¨** - æ€§èƒ½è¶‹åŠ¿å’Œåˆ†æ

### æˆªå›¾

<details>
<summary><b>ä»ªè¡¨ç›˜æ¦‚è§ˆ</b></summary>

<img src="screenshots/webui-dashboard.png" alt="ä»ªè¡¨ç›˜" width="700">

å®æ—¶æŒ‡æ ‡ã€Provider çŠ¶æ€å’Œç³»ç»Ÿå¥åº·ç›‘æ§ã€‚

</details>

<details>
<summary><b>è®°å¿†æ ‡ç­¾ - ä¼šè¯ç®¡ç†</b></summary>

<img src="screenshots/webui-memory.png" alt="è®°å¿†ç®¡ç†" width="700">

åŸºäºä¼šè¯çš„å¯¹è¯å†å²ï¼Œæ”¯æŒ FTS5 å…¨æ–‡æœç´¢ã€‚

</details>

<details>
<summary><b>æŠ€èƒ½æ ‡ç­¾ - å‘ç°ä¸æ¨è</b></summary>

<img src="screenshots/webui-skills.png" alt="æŠ€èƒ½å‘ç°" width="700">

ç”± Vercel Skills CLI é©±åŠ¨çš„æ™ºèƒ½æŠ€èƒ½å‘ç°ã€‚

</details>

---

## ğŸ“– API å‚è€ƒ

### ç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| GET | `/health` | å¥åº·æ£€æŸ¥ |
| GET | `/providers` | åˆ—å‡ºæ‰€æœ‰ 9 ä¸ª Provider |
| POST | `/api/ask` | åŒæ­¥è¯·æ±‚ |
| POST | `/api/submit` | å¼‚æ­¥è¯·æ±‚ |
| GET | `/api/query/{id}` | æŸ¥è¯¢è¯·æ±‚çŠ¶æ€ |
| GET | `/api/pending` | åˆ—å‡ºå¾…å¤„ç†è¯·æ±‚ |
| POST | `/api/cancel/{id}` | å–æ¶ˆè¯·æ±‚ |
| GET | `/api/memory/sessions` | åˆ—å‡ºè®°å¿†ä¼šè¯ |
| GET | `/api/memory/search` | å…¨æ–‡æœç´¢ |
| GET | `/api/memory/stats` | è®°å¿†ç»Ÿè®¡ |
| GET | `/api/skills/recommendations` | è·å–æŠ€èƒ½æ¨è |
| GET | `/api/skills/list` | åˆ—å‡ºæ‰€æœ‰æŠ€èƒ½ |
| WS | `/ws` | WebSocket è¿æ¥ |

### è¯·æ±‚å‚æ•°

**POST /api/ask & /api/submitï¼š**
```json
{
  "provider": "kimi",           // å¿…éœ€ï¼šAI Providerï¼ˆ9 ä¸ªé€‰é¡¹ï¼‰
  "message": "ä½ çš„é—®é¢˜",         // å¿…éœ€ï¼šç”¨æˆ·æ¶ˆæ¯
  "model": "thinking",          // å¯é€‰ï¼šç‰¹å®šæ¨¡å‹
  "wait": true,                 // å¯é€‰ï¼šç­‰å¾…å®Œæˆ
  "timeout": 120,               // å¯é€‰ï¼šè¶…æ—¶ç§’æ•°
  "metadata": {}                // å¯é€‰ï¼šè‡ªå®šä¹‰å…ƒæ•°æ®
}
```

---

## ğŸ“š æ–‡æ¡£èµ„æº

### æ ¸å¿ƒæ–‡æ¡£

- **[è®°å¿†ç³»ç»Ÿæ¶æ„](lib/memory/INTEGRATION_DESIGN.md)** - å®Œæ•´è®¾è®¡
- **[æ•°æ®åº“ç»“æ„](lib/memory/DATABASE_STRUCTURE.md)** - Schema å’ŒæŸ¥è¯¢
- **[äº‘ç«¯åŒæ­¥æŒ‡å—](lib/memory/SYNC_QUICKSTART.md)** - Google Drive è®¾ç½®
- **[V1 vs V2 å¯¹æ¯”](lib/memory/V1_VS_V2.md)** - è®°å¿†ç³»ç»Ÿæ¼”è¿›

### å…¶ä»–èµ„æº

- **[API æ–‡æ¡£](docs/API.md)** - å®Œæ•´ API å‚è€ƒ
- **[é…ç½®æŒ‡å—](docs/CONFIG.md)** - æ‰€æœ‰é…ç½®é€‰é¡¹
- **[éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)** - ç”Ÿäº§éƒ¨ç½²

---

## ğŸ—ºï¸ å¼€å‘è·¯çº¿

### v0.22ï¼ˆå½“å‰ï¼‰- å¯å‘å¼è®°å¿† âœ…

- [x] **å¯å‘å¼æ£€ç´¢** - åŸºäº Stanford Generative Agents çš„ Î±R + Î²I + Î³T è¯„åˆ†
- [x] **é‡è¦æ€§è¿½è¸ª** - ç”¨æˆ·è¯„åˆ†å’Œ LLM è¯„ä¼°çš„é‡è¦æ€§åˆ†æ•°
- [x] **è®¿é—®æ—¥å¿—** - è¿½è¸ªè®°å¿†è®¿é—®ç”¨äºæ—¶æ•ˆæ€§è®¡ç®—
- [x] **è‰¾å®¾æµ©æ–¯è¡°å‡** - åŸºäºæ—¶é—´çš„é—å¿˜æ›²çº¿å®ç°
- [x] **System 2 å¢å¼º** - åˆå¹¶ã€æŠ½è±¡ã€é—å¿˜æ“ä½œ
- [x] **ccb-consolidate CLI** - æ–°çš„åˆå¹¶ç®¡ç†å·¥å…·
- [x] **å¯é…ç½®æƒé‡** - `~/.ccb/heuristic_config.json`

### v0.21ï¼ˆä¸Šä¸ªç‰ˆæœ¬ï¼‰- è®°å¿†å¢å¼º âœ…

- [x] **è®°å¿†é€æ˜åº¦** - è¿½è¸ªæ¯ä¸ªè¯·æ±‚æ³¨å…¥çš„è®°å¿†
- [x] **Observations CRUD** - æ‰‹åŠ¨è®°å¿†ç®¡ç† API
- [x] **LLM åˆå¹¶å™¨** - AI é©±åŠ¨çš„æ´å¯Ÿæå–
- [x] **è®°å¿†é…ç½® API** - è¿è¡Œæ—¶é…ç½®
- [x] **æŠ€èƒ½åé¦ˆå¾ªç¯** - åŸºäºè¯„åˆ†çš„æ¨è
- [x] **è®¨è®ºè®°å¿†** - æŒä¹…åŒ–å¤š AI è®¨è®º
- [x] **CLI å¢å¼º** - trace, injections, export å‘½ä»¤

### v0.20ï¼ˆæ›´æ—©ç‰ˆæœ¬ï¼‰- åŒç³»ç»Ÿè®°å¿† âœ…

- [x] **Context Saver** - System 1 å³æ—¶å½’æ¡£
- [x] **Memory Consolidator** - System 2 å¤œé—´å¤„ç†
- [x] **ccb-mem CLI** - ç»Ÿä¸€è®°å¿†ç®¡ç†
- [x] **å®‰å…¨åŠ å›º** - è·¯å¾„éå†é˜²æŠ¤
- [x] **Claude Provider** - ä½œä¸ºç¬¬ 9 ä¸ª Provider æ·»åŠ 

### v0.23ï¼ˆ2026 å¹´ Q2ï¼‰- è¯­ä¹‰å¢å¼º

- [ ] Qdrant å‘é‡æ•°æ®åº“é›†æˆ
- [ ] è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- [ ] å¤šè¯­è¨€åµŒå…¥
- [ ] è®°å¿†èšç±»

### v0.24ï¼ˆ2026 å¹´ Q3ï¼‰- Agent è‡ªä¸»æ€§

- [ ] Agent è®°å¿†å‡½æ•°è°ƒç”¨ï¼ˆLetta æ¨¡å¼ï¼‰
- [ ] ç»“æ„åŒ–è®°å¿†å—ï¼ˆcore_memoryï¼‰
- [ ] è‡ªæˆ‘æ›´æ–° Agents
- [ ] è®°å¿†ç‰ˆæœ¬æ§åˆ¶

### v0.25ï¼ˆ2026 å¹´ Q4ï¼‰- å›¢é˜Ÿåä½œ

- [ ] å¤šç”¨æˆ·è®°å¿†éš”ç¦»
- [ ] å…±äº«è®°å¿†æ± 
- [ ] æƒé™ç³»ç»Ÿ
- [ ] å®æ—¶åä½œ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯¦æƒ…è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)ã€‚

### è´¡çŒ®è€…å¿«é€Ÿå¼€å§‹

```bash
# 1. Fork å¹¶å…‹éš†
git clone https://github.com/YOUR_USERNAME/ai-router-ccb.git
cd ai-router-ccb

# 2. åˆ›å»ºåˆ†æ”¯
git checkout -b feature/your-feature

# 3. ä¿®æ”¹å¹¶æµ‹è¯•
python3 -m pytest tests/

# 4. æäº¤å¹¶æ¨é€
git commit -m "feat: add your feature"
git push origin feature/your-feature

# 5. åˆ›å»º Pull Request
```

---

## ğŸ“œ å¼€æºè®¸å¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

**çµæ„Ÿæ¥æºï¼š**
- [Stanford Generative Agents](https://arxiv.org/pdf/2304.03442) - å¯å‘å¼æ£€ç´¢å…¬å¼
- [Awesome-AI-Memory](https://github.com/IAAR-Shanghai/Awesome-AI-Memory) - è®°å¿†ç³»ç»Ÿç»¼è¿°
- [Mem0](https://github.com/mem0ai/mem0) - è¯­ä¹‰è®°å¿†æ¶æ„
- [Letta (MemGPT)](https://github.com/cpacker/MemGPT) - ç»“æ„åŒ–è®°å¿†å—
- [LangChain](https://github.com/langchain-ai/langchain) - è®°å¿†æ¨¡å¼
- [claude-mem](https://github.com/thedotmack/claude-mem) - ç”Ÿå‘½å‘¨æœŸé’©å­

**æ„å»ºæŠ€æœ¯ï¼š**
- [FastAPI](https://fastapi.tiangolo.com) - ç°ä»£ Web æ¡†æ¶
- [SQLite](https://www.sqlite.org) - å¯é æ•°æ®åº“
- [Claude Code](https://www.anthropic.com/claude) - AI ç¼–æ’è€…

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- ğŸ› é—®é¢˜ï¼š[GitHub Issues](https://github.com/LeoLin990405/ai-router-ccb/issues)
- ğŸ“– æ–‡æ¡£ï¼š[Documentation](docs/)

---

<div align="center">

**ç”± CCB å›¢é˜Ÿç”¨ â¤ï¸ æ„å»º**

**[â¬† å›åˆ°é¡¶éƒ¨](#-ccb-gateway)**

</div>
