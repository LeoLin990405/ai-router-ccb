<p align="center">
  <img src="https://img.shields.io/github/stars/LeoLin990405/ai-router-ccb?style=social" alt="Stars">
  <img src="https://img.shields.io/github/license/LeoLin990405/ai-router-ccb?color=blue" alt="License">
  <img src="https://img.shields.io/badge/Python-3.9+-3776AB?logo=python&logoColor=white" alt="Python">
  <img src="https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white" alt="FastAPI">
</p>

<h1 align="center">
  <br>
  ğŸ¤–
  <br>
  CCB Gateway
  <br>
</h1>

<h4 align="center">ä¼ä¸šçº§å¤š AI ç¼–æ’å¹³å°</h4>

<p align="center">
  <em>Claude ä½œä¸ºä¸»è„‘ï¼Œé€šè¿‡ç»Ÿä¸€ Gateway API è°ƒåº¦ 7 ä¸ª AI Providerï¼Œæ”¯æŒå®æ—¶ç›‘æ§</em>
</p>

<p align="center">
  <a href="#-ç‰¹æ€§">ç‰¹æ€§</a> â€¢
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#-web-ui">Web UI</a> â€¢
  <a href="#-api-å‚è€ƒ">API</a> â€¢
  <a href="#-æ¶æ„">æ¶æ„</a> â€¢
  <a href="#-å®‰è£…">å®‰è£…</a>
</p>

<p align="center">
  <a href="README.md">English</a> | <strong>ç®€ä½“ä¸­æ–‡</strong>
</p>

<p align="center">
  <img src="assets/demo/gateway-demo.gif" alt="CCB Gateway æ¼”ç¤º" width="800">
</p>

---

## æ¦‚è¿°

**CCB Gateway** æ˜¯ä¸€ä¸ªç”Ÿäº§çº§å¤š AI ç¼–æ’å¹³å°ï¼Œ**Claude ä½œä¸ºä¸»è„‘ï¼ˆOrchestratorï¼‰**ï¼Œé€šè¿‡ç»Ÿä¸€çš„ Gateway API æ™ºèƒ½è°ƒåº¦ 7 ä¸ª AI Providerã€‚

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Claude (ä¸»è„‘)           â”‚
                    â”‚      Claude Code CLI        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      CCB Gateway API        â”‚
                    â”‚    http://localhost:8765    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼           â–¼           â–¼           â–¼           â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Gemini  â”‚ â”‚ DeepSeekâ”‚ â”‚  Codex  â”‚ â”‚  Kimi   â”‚ â”‚  Qwen   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚OpenCode â”‚ â”‚  iFlow  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ºä»€ä¹ˆé€‰æ‹© CCB Gatewayï¼Ÿ

| æŒ‘æˆ˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| å¤šä¸ª AI CLI æ¥å£ä¸ç»Ÿä¸€ | **ç»Ÿä¸€ Gateway API**ï¼Œæ‰€æœ‰ Provider ä¸€è‡´ |
| æ‰‹åŠ¨é€‰æ‹© Provider | **æ™ºèƒ½è·¯ç”±**ï¼ŒåŸºäºä»»åŠ¡åˆ†æè‡ªåŠ¨é€‰æ‹© |
| æ— æ³•è§‚å¯Ÿ AI æ“ä½œ | **å®æ—¶ç›‘æ§**ï¼ŒWebSocket + Web UI |
| æ— ç¼“å­˜æˆ–é‡è¯•é€»è¾‘ | **å†…ç½®ç¼“å­˜ã€é‡è¯•å’Œé™çº§** |
| çœ‹ä¸åˆ° AI æ€è€ƒè¿‡ç¨‹ | **æ€è€ƒé“¾ & åŸå§‹è¾“å‡ºæ•è·** |

---

## âœ¨ ç‰¹æ€§

### æ ¸å¿ƒç½‘å…³

- **REST API** - `POST /api/ask`, `GET /api/reply/{id}`, `GET /api/status`
- **WebSocket** - å®æ—¶äº‹ä»¶æ¨é€ `/api/ws`
- **ä¼˜å…ˆçº§é˜Ÿåˆ—** - SQLite æŒä¹…åŒ–çš„è¯·æ±‚ä¼˜å…ˆçº§é˜Ÿåˆ—
- **å¤šåç«¯** - HTTP APIã€CLI æ‰§è¡Œã€WezTerm é›†æˆ
- **å¥åº·ç›‘æ§** - è‡ªåŠ¨ Provider å¥åº·æ£€æŸ¥

### ç”Ÿäº§çº§åŠŸèƒ½

- **API è®¤è¯** - åŸºäº API Key çš„è®¤è¯ï¼ŒSHA-256 å“ˆå¸Œ
- **é™æµ** - ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ”¯æŒæŒ‰ Key é™æµ
- **å“åº”ç¼“å­˜** - SQLite ç¼“å­˜ï¼Œæ”¯æŒ TTL å’Œæ¨¡å¼æ’é™¤
- **é‡è¯•ä¸é™çº§** - æŒ‡æ•°é€€é¿ï¼Œè‡ªåŠ¨ Provider é™çº§
- **å¹¶è¡ŒæŸ¥è¯¢** - åŒæ—¶æŸ¥è¯¢å¤šä¸ª Provider
- **Prometheus æŒ‡æ ‡** - `/metrics` ç«¯ç‚¹ç”¨äºç›‘æ§
- **æµå¼å“åº”** - Server-Sent Events å®æ—¶å“åº”

### CLI ç›‘æ§ï¼ˆæ–°åŠŸèƒ½ï¼‰

- **æ€è€ƒé“¾æ•è·** - ä» `<thinking>` æ ‡ç­¾ã€`[Thinking]` å—ä¸­æå–æ¨ç†è¿‡ç¨‹
- **åŸå§‹è¾“å‡ºå­˜å‚¨** - å®Œæ•´ CLI è¾“å‡ºä¿å­˜ç”¨äºè°ƒè¯•
- **JSONL è§£æ** - Codex/OpenCode ç»“æ„åŒ–è¾“å‡ºæå–
- **Web UI å±•ç¤º** - è¯·æ±‚è¯¦æƒ…ä¸­å¯æŠ˜å çš„æ€è€ƒé“¾å’ŒåŸå§‹è¾“å‡º

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨ç½‘å…³

```bash
# å¯åŠ¨ç½‘å…³æœåŠ¡å™¨
cd ~/.local/share/codex-dual
python3 -m lib.gateway.gateway_server --port 8765

# æˆ–ä½¿ç”¨é…ç½®æ–‡ä»¶
python3 -m lib.gateway.gateway_server --config ~/.ccb/gateway.yaml
```

### å‘é€è¯·æ±‚

```bash
# æäº¤è¯·æ±‚
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{"provider": "qwen", "message": "ä½ å¥½"}'

# è·å–å“åº”ï¼ˆç­‰å¾…å®Œæˆï¼‰
curl "http://localhost:8765/api/reply/{request_id}?wait=true"

# å¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰ Provider
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{"provider": "@all", "message": "2+2ç­‰äºå¤šå°‘ï¼Ÿ", "aggregation_strategy": "first_success"}'
```

### æ£€æŸ¥çŠ¶æ€

```bash
# ç½‘å…³çŠ¶æ€
curl http://localhost:8765/api/status

# Prometheus æŒ‡æ ‡
curl http://localhost:8765/metrics
```

---

## ğŸ–¥ï¸ Web UI

å¯åŠ¨ç½‘å…³åè®¿é—® `http://localhost:8765/` æ‰“å¼€ Web UIã€‚

<p align="center">
  <img src="screenshots/dashboard.png" alt="ä»ªè¡¨ç›˜" width="800">
  <br>
  <em>ä»ªè¡¨ç›˜ - å®æ—¶ç½‘å…³ç»Ÿè®¡å’Œ Provider çŠ¶æ€</em>
</p>

### ä»ªè¡¨ç›˜
- å®æ—¶ç½‘å…³ç»Ÿè®¡å’Œ Provider çŠ¶æ€
- è¯·æ±‚æ—¶é—´çº¿å¯è§†åŒ–
- WebSocket å®æ—¶æ´»åŠ¨æ—¥å¿—

### è¯·æ±‚ç®¡ç†
- å¯é…ç½®é¡µé¢å¤§å°çš„åˆ†é¡µ
- æŒ‰ Providerã€çŠ¶æ€ã€å†…å®¹æœç´¢å’Œè¿‡æ»¤
- ä¸€é”®é‡è¯•å¤±è´¥è¯·æ±‚
- **æŸ¥çœ‹æ¯ä¸ªè¯·æ±‚çš„æ€è€ƒé“¾å’ŒåŸå§‹è¾“å‡º**

<p align="center">
  <img src="screenshots/requests.png" alt="è¯·æ±‚ç®¡ç†" width="800">
  <br>
  <em>è¯·æ±‚ç®¡ç† - æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰è¯·æ±‚</em>
</p>

<p align="center">
  <img src="screenshots/request-detail.png" alt="è¯·æ±‚è¯¦æƒ…" width="800">
  <br>
  <em>è¯·æ±‚è¯¦æƒ… - æ€è€ƒé“¾å’ŒåŸå§‹è¾“å‡º</em>
</p>

### æµ‹è¯•æ§åˆ¶å°
- äº¤äº’å¼ API æµ‹è¯•
- Provider é€‰æ‹©ï¼Œæ”¯æŒè‡ªåŠ¨è·¯ç”±
- æµå¼å“åº”å¼€å…³

<p align="center">
  <img src="screenshots/test-console.png" alt="æµ‹è¯•æ§åˆ¶å°" width="800">
  <br>
  <em>æµ‹è¯•æ§åˆ¶å° - äº¤äº’å¼ API æµ‹è¯•</em>
</p>

### å¯¹æ¯”æ¨¡å¼
- å¹¶æ’ Provider å¯¹æ¯”
- åŒæ—¶æŸ¥è¯¢å¤šä¸ª Provider

<p align="center">
  <img src="screenshots/compare.png" alt="å¯¹æ¯”æ¨¡å¼" width="800">
  <br>
  <em>å¯¹æ¯”æ¨¡å¼ - å¹¶æ’ Provider å¯¹æ¯”</em>
</p>

### åŠŸèƒ½ç‰¹æ€§
- **æ·±è‰²/æµ…è‰²ä¸»é¢˜** - åˆ‡æ¢å¹¶æŒä¹…åŒ–åˆ° localStorage
- **å›½é™…åŒ–æ”¯æŒ** - ä¸­è‹±æ–‡åŒè¯­
- **é”®ç›˜å¿«æ·é”®** - `1-6` åˆ‡æ¢æ ‡ç­¾é¡µï¼Œ`R` åˆ·æ–°ï¼Œ`T` æµ‹è¯•ï¼Œ`?` å¸®åŠ©
- **ç¡®è®¤å¯¹è¯æ¡†** - é˜²æ­¢è¯¯åˆ é™¤
- **å¤åˆ¶åˆ°å‰ªè´´æ¿** - ä¸€é”®å¤åˆ¶ API Key

<p align="center">
  <img src="screenshots/api-keys.png" alt="API Keys" width="800">
  <br>
  <em>API Key ç®¡ç†</em>
</p>

<p align="center">
  <img src="screenshots/dashboard-light.png" alt="æµ…è‰²ä¸»é¢˜" width="800">
  <br>
  <em>æµ…è‰²ä¸»é¢˜æ”¯æŒ</em>
</p>

---

## ğŸ“¡ API å‚è€ƒ

### ç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| `POST` | `/api/ask` | å‘ Provider æäº¤è¯·æ±‚ |
| `GET` | `/api/reply/{id}` | è·å–å“åº”ï¼ˆæ”¯æŒ `?wait=true`ï¼‰ |
| `GET` | `/api/status` | ç½‘å…³å’Œ Provider çŠ¶æ€ |
| `GET` | `/api/requests` | åˆ—å‡ºæœ€è¿‘è¯·æ±‚ï¼ˆæ”¯æŒåˆ†é¡µï¼‰ |
| `DELETE` | `/api/request/{id}` | å–æ¶ˆå¾…å¤„ç†è¯·æ±‚ |
| `GET` | `/api/health` | å¥åº·æ£€æŸ¥ |
| `GET` | `/api/cache/stats` | ç¼“å­˜ç»Ÿè®¡ |
| `DELETE` | `/api/cache` | æ¸…é™¤ç¼“å­˜ |
| `GET` | `/metrics` | Prometheus æŒ‡æ ‡ |
| `GET` | `/docs` | äº¤äº’å¼ API æ–‡æ¡£ |

### è¯·æ±‚ä½“

```json
{
  "provider": "qwen",
  "message": "ä½ çš„é—®é¢˜",
  "timeout_s": 300,
  "priority": 50,
  "cache_bypass": false,
  "aggregation_strategy": null
}
```

### å“åº”ï¼ˆåŒ…å« thinking/raw_outputï¼‰

```json
{
  "request_id": "abc123-def",
  "status": "completed",
  "response": "ç­”æ¡ˆæ˜¯...",
  "thinking": "<æå–çš„æ€è€ƒé“¾ï¼ˆå¦‚æœ‰ï¼‰>",
  "raw_output": "<å®Œæ•´ CLI è¾“å‡ºç”¨äºè°ƒè¯•>",
  "latency_ms": 1234.56,
  "cached": false
}
```

### API è®¤è¯

```bash
# åˆ›å»º API Key
curl -X POST http://localhost:8765/api/admin/keys \
  -H "Content-Type: application/json" \
  -d '{"name": "my-app", "rate_limit_rpm": 100}'

# ä½¿ç”¨ API Key
curl -X POST http://localhost:8765/api/ask \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"provider": "qwen", "message": "ä½ å¥½"}'
```

---

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CCB Gateway æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 Claude (ä¸»è„‘ / Orchestrator)                   â”‚ â”‚
â”‚  â”‚                  æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ä¸åè°ƒ                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Gateway API å±‚                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚REST API â”‚ â”‚WebSocketâ”‚ â”‚  è®¤è¯   â”‚ â”‚  é™æµ   â”‚ â”‚  æŒ‡æ ‡   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚(FastAPI)â”‚ â”‚ (äº‹ä»¶)  â”‚ â”‚(API Key)â”‚ â”‚(ä»¤ç‰Œæ¡¶) â”‚ â”‚(Prometh)â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        å¤„ç†å±‚                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  ç¼“å­˜   â”‚ â”‚  é‡è¯•   â”‚ â”‚  å¹¶è¡Œ   â”‚ â”‚  æµå¼   â”‚ â”‚ æ€è€ƒé“¾  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚(SQLite) â”‚ â”‚ (é™çº§)  â”‚ â”‚(å¤šAI)   â”‚ â”‚ (SSE)   â”‚ â”‚  æå–   â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  Provider å±‚ (7 ä¸ª Provider)                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚Gemini â”‚ â”‚DeepSeekâ”‚ â”‚ Codex â”‚ â”‚OpenCodeâ”‚ â”‚ Kimi â”‚ â”‚ Qwen â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚ â”‚
â”‚  â”‚  â”‚ iFlow â”‚                                                     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Provider çŸ©é˜µ

| Provider | åç«¯ | æœ€ä½³ç”¨é€” | å¹³å‡å»¶è¿Ÿ |
|----------|------|----------|----------|
| **Kimi** | CLI æ‰§è¡Œ | ä¸­æ–‡ã€é•¿ä¸Šä¸‹æ–‡ | ~8s |
| **Qwen** | CLI æ‰§è¡Œ | å¤šè¯­è¨€ | ~14s |
| **iFlow** | CLI æ‰§è¡Œ | å·¥ä½œæµè‡ªåŠ¨åŒ– | ~15s |
| **Codex** | CLI æ‰§è¡Œ | ä»£ç ç”Ÿæˆ | ~19s |
| **DeepSeek** | CLI æ‰§è¡Œ | æ·±åº¦æ¨ç† | ~55s |
| **Gemini** | CLI æ‰§è¡Œ | å‰ç«¯ã€ä»£ç å®¡æŸ¥ | ~100s |
| **OpenCode** | CLI æ‰§è¡Œ | é€šç”¨ç¼–ç¨‹ | ~237s |

> **æ³¨æ„**: Claude æ˜¯ä¸»è„‘ï¼Œä¸å‚ä¸ä»»åŠ¡è°ƒåº¦ã€‚

---

## ğŸ“¦ å®‰è£…

### å‰ç½®æ¡ä»¶

- **Python 3.9+**
- **WezTerm**ï¼ˆæ¨èï¼‰æˆ– tmux
- å·²å®‰è£… Provider CLI: `codex`, `gemini`, `opencode`, `deepseek`, `kimi`, `qwen`, `iflow`

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/LeoLin990405/ai-router-ccb.git ~/.local/share/codex-dual

# å®‰è£…ä¾èµ–
pip install fastapi uvicorn pyyaml aiohttp prometheus-client

# å¯åŠ¨ç½‘å…³
cd ~/.local/share/codex-dual
python3 -m lib.gateway.gateway_server --port 8765

# æ‰“å¼€ Web UI
open http://localhost:8765/
```

### é…ç½®

```yaml
# ~/.ccb/gateway.yaml
server:
  host: "127.0.0.1"
  port: 8765

default_provider: "qwen"

providers:
  gemini:
    enabled: true
    backend_type: "cli_exec"
    cli_command: "gemini"
    timeout_s: 300
  codex:
    enabled: true
    backend_type: "cli_exec"
    cli_command: "codex"
  # ... å…¶ä»– provider
```

---

## ğŸ”„ æœ€è¿‘æ›´æ–°

### v0.8.x - CLI ç›‘æ§
- **æ€è€ƒé“¾æ•è·** - æå–å¹¶å±•ç¤º AI æ¨ç†è¿‡ç¨‹
- **åŸå§‹è¾“å‡ºå­˜å‚¨** - å®Œæ•´ CLI è¾“å‡ºä¿å­˜åˆ°æ•°æ®åº“
- **æ”¹è¿›è¾“å‡ºæ¸…ç†** - æ›´å¥½çš„ Gemini æ ¼å¼ JSON æå–
- **Web UI å¢å¼º** - å¯æŠ˜å çš„æ€è€ƒé“¾/åŸå§‹è¾“å‡ºå±•ç¤º

### v0.7.x - ç”Ÿäº§çº§åŠŸèƒ½
- API è®¤è¯ä¸é™æµ
- å“åº”ç¼“å­˜ä¸ TTL
- é‡è¯•ä¸é™çº§æœºåˆ¶
- Prometheus æŒ‡æ ‡é›†æˆ

---

## ğŸ™ è‡´è°¢

- **[bfly123/claude_code_bridge](https://github.com/bfly123/claude_code_bridge)** - åŸå§‹å¤š AI åä½œæ¡†æ¶
- **[Grafbase/Nexus](https://github.com/grafbase/nexus)** - AI ç½‘å…³æ¶æ„çµæ„Ÿ

---

## ğŸ‘¥ è´¡çŒ®è€…

- **Leo** ([@LeoLin990405](https://github.com/LeoLin990405)) - é¡¹ç›®è´Ÿè´£äºº
- **Claude** (Anthropic Claude Opus 4.5) - æ¶æ„ä¸å®ç°

---

## ğŸ“„ è®¸å¯è¯

MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE)

---

<p align="center">
  <sub>äººæœºåä½œå…±åŒæ„å»º</sub>
  <br>
  <sub>â­ å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™ä¸ª Starï¼</sub>
</p>
