<p align="center">
  <img src="https://img.shields.io/badge/AI%20Orchestrator-å¤šAIåä½œå¹³å°-blue?style=for-the-badge" alt="AI Orchestrator">
  <img src="https://img.shields.io/badge/Provider-7ä¸ª-green?style=for-the-badge" alt="Providers">
  <img src="https://img.shields.io/badge/Gateway-REST%20%2B%20WebSocket-orange?style=for-the-badge" alt="Gateway">
</p>

<h1 align="center">AI Orchestrator</h1>

<p align="center">
  <strong>ä¼ä¸šçº§å¤š AI ç¼–æ’å¹³å°</strong>
  <br>
  <em>Claude ä½œä¸ºä¸»è„‘ï¼Œé€šè¿‡ç»Ÿä¸€ Gateway API è°ƒåº¦ 7 ä¸ª AI Provider</em>
</p>

<p align="center">
  <a href="#-ç‰¹æ€§">ç‰¹æ€§</a> â€¢
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#-æ¶æ„">æ¶æ„</a> â€¢
  <a href="#-gateway-api">Gateway API</a> â€¢
  <a href="#-phase-8-web-ui">Phase 8</a> â€¢
  <a href="#-å®‰è£…">å®‰è£…</a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.9+-3776AB?logo=python&logoColor=white" alt="Python">
  <img src="https://img.shields.io/badge/FastAPI-009688?logo=fastapi&logoColor=white" alt="FastAPI">
  <img src="https://img.shields.io/badge/SQLite-003B57?logo=sqlite&logoColor=white" alt="SQLite">
  <img src="https://img.shields.io/badge/Prometheus-E6522C?logo=prometheus&logoColor=white" alt="Prometheus">
  <img src="https://img.shields.io/badge/License-MIT-yellow" alt="License">
</p>

[English](README.md) | **ä¸­æ–‡**

---

## ğŸ¯ æ¦‚è¿°

**AI Orchestrator** æ˜¯ä¸€ä¸ªç”Ÿäº§çº§å¤š AI ç¼–æ’å¹³å°ï¼Œ**Claude ä½œä¸ºä¸»è„‘ï¼ˆOrchestratorï¼‰**ï¼Œé€šè¿‡ç»Ÿä¸€çš„ Gateway API æ™ºèƒ½è°ƒåº¦ 7 ä¸ª AI Providerã€‚

### æ¶æ„ç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Claude (ä¸»è„‘ / Orchestrator)                â”‚
â”‚                   Claude Code CLI                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ä»»åŠ¡è°ƒåº¦
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CCB Gateway API                        â”‚
â”‚                 http://localhost:8765                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Gemini  â”‚  â”‚ DeepSeekâ”‚  â”‚  Codex  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚OpenCode â”‚  â”‚  Kimi   â”‚  â”‚  Qwen   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  iFlow  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ºä»€ä¹ˆé€‰æ‹© AI Orchestratorï¼Ÿ

| æŒ‘æˆ˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| å¤šä¸ª AI CLI æ¥å£ä¸ç»Ÿä¸€ | **ç»Ÿä¸€ Gateway API**ï¼Œæ‰€æœ‰ Provider ä¸€è‡´ |
| æ‰‹åŠ¨é€‰æ‹© Provider | **æ™ºèƒ½è·¯ç”±**ï¼ŒåŸºäºä»»åŠ¡åˆ†æè‡ªåŠ¨é€‰æ‹© |
| æ— æ³•è§‚å¯Ÿ AI æ“ä½œ | **å®æ—¶ç›‘æ§**ï¼ŒWebSocket äº‹ä»¶æ¨é€ |
| æ— ç¼“å­˜æˆ–é‡è¯•é€»è¾‘ | **å†…ç½®ç¼“å­˜ã€é‡è¯•å’Œé™çº§** |
| æ— é™æµæˆ–è®¤è¯ | **API Key è®¤è¯ + ä»¤ç‰Œæ¡¶é™æµ** |

---

## âœ¨ ç‰¹æ€§

### Gateway APIï¼ˆæ ¸å¿ƒï¼‰

| ç‰¹æ€§ | æè¿° |
|------|------|
| **REST API** | `POST /api/ask`, `GET /api/reply/{id}`, `GET /api/status` |
| **WebSocket** | å®æ—¶äº‹ä»¶æ¨é€ `/api/ws` |
| **ä¼˜å…ˆçº§é˜Ÿåˆ—** | SQLite æŒä¹…åŒ–çš„è¯·æ±‚ä¼˜å…ˆçº§é˜Ÿåˆ— |
| **å¤šåç«¯** | HTTP APIã€CLI æ‰§è¡Œã€WezTerm é›†æˆ |
| **å¥åº·ç›‘æ§** | è‡ªåŠ¨ Provider å¥åº·æ£€æŸ¥å’ŒæŒ‡æ ‡ |

### Phase 7 ç”Ÿäº§çº§åŠŸèƒ½

| ç‰¹æ€§ | æè¿° |
|------|------|
| **API è®¤è¯** | åŸºäº API Key çš„è®¤è¯ï¼ŒSHA-256 å“ˆå¸Œ |
| **é™æµ** | ä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œæ”¯æŒæŒ‰ Key é™æµ |
| **å“åº”ç¼“å­˜** | SQLite ç¼“å­˜ï¼Œæ”¯æŒ TTL å’Œæ¨¡å¼æ’é™¤ |
| **é‡è¯•ä¸é™çº§** | æŒ‡æ•°é€€é¿ï¼Œè‡ªåŠ¨ Provider é™çº§ |
| **å¹¶è¡ŒæŸ¥è¯¢** | åŒæ—¶æŸ¥è¯¢å¤šä¸ª Provider |
| **Prometheus æŒ‡æ ‡** | `/metrics` ç«¯ç‚¹ç”¨äºç›‘æ§ |
| **æµå¼ä¼ è¾“** | Server-Sent Events å®æ—¶å“åº” |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨ Gateway

```bash
# å¯åŠ¨ Gateway æœåŠ¡å™¨
cd ~/.local/share/codex-dual
python3 -m lib.gateway.gateway_server --config ~/.ccb/gateway.yaml

# æˆ–ä½¿ç”¨ shell å‡½æ•°
source ~/.ccb/gateway-functions.sh
gw-start
```

### å‘é€è¯·æ±‚

```bash
# é€šè¿‡ REST API
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{"provider": "qwen", "message": "ä½ å¥½"}'

# è·å–å“åº”
curl http://localhost:8765/api/reply/{request_id}?wait=true

# é€šè¿‡ shell å‡½æ•°
source ~/.ccb/gateway-functions.sh
gw-ask qwen "ä½ çš„é—®é¢˜"
gw-kimi "ä½ çš„é—®é¢˜"
gw-parallel "æŸ¥è¯¢æ‰€æœ‰ Provider" first_success
```

### æ£€æŸ¥çŠ¶æ€

```bash
# Gateway çŠ¶æ€
curl http://localhost:8765/api/status

# ç¼“å­˜ç»Ÿè®¡
curl http://localhost:8765/api/cache/stats

# Prometheus æŒ‡æ ‡
curl http://localhost:8765/metrics
```

---

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI Orchestrator æ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Claude (ä¸»è„‘ / Orchestrator)                        â”‚ â”‚
â”‚  â”‚                    æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ä¸åè°ƒ                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Gateway API å±‚                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ REST API  â”‚ â”‚ WebSocket â”‚ â”‚   è®¤è¯    â”‚ â”‚   é™æµ    â”‚ â”‚  æŒ‡æ ‡   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (FastAPI) â”‚ â”‚  (äº‹ä»¶)   â”‚ â”‚ (API Key) â”‚ â”‚(ä»¤ç‰Œæ¡¶)   â”‚ â”‚(Prometh)â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         å¤„ç†å±‚                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚  â”‚  â”‚   ç¼“å­˜    â”‚ â”‚   é‡è¯•    â”‚ â”‚   å¹¶è¡Œ    â”‚ â”‚   æµå¼    â”‚             â”‚ â”‚
â”‚  â”‚  â”‚ (SQLite)  â”‚ â”‚  (é™çº§)   â”‚ â”‚ (å¤šAI)    â”‚ â”‚  (SSE)    â”‚             â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Provider å±‚ (7 ä¸ª Provider)                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚  â”‚Gemini â”‚ â”‚DeepSeekâ”‚ â”‚ Codex â”‚ â”‚OpenCodeâ”‚ â”‚ Kimi  â”‚ â”‚ Qwen  â”‚      â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚ â”‚
â”‚  â”‚  â”‚ iFlow â”‚                                                           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Gateway API

### REST ç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| `POST` | `/api/ask` | å‘ Provider æäº¤è¯·æ±‚ |
| `GET` | `/api/reply/{request_id}` | è·å–å“åº”ï¼ˆæ”¯æŒ `?wait=true`ï¼‰ |
| `GET` | `/api/status` | è·å– Gateway å’Œ Provider çŠ¶æ€ |
| `GET` | `/api/requests` | åˆ—å‡ºæœ€è¿‘è¯·æ±‚ |
| `DELETE` | `/api/request/{request_id}` | å–æ¶ˆå¾…å¤„ç†è¯·æ±‚ |
| `GET` | `/api/health` | å¥åº·æ£€æŸ¥ |
| `GET` | `/api/cache/stats` | ç¼“å­˜ç»Ÿè®¡ |
| `DELETE` | `/api/cache` | æ¸…é™¤ç¼“å­˜ |
| `GET` | `/metrics` | Prometheus æŒ‡æ ‡ |
| `GET` | `/docs` | äº¤äº’å¼ API æ–‡æ¡£ |

### è¯·æ±‚ç¤ºä¾‹

```bash
# æäº¤è¯·æ±‚
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "qwen",
    "message": "è§£é‡Š Python ä¸­çš„ async/await",
    "timeout_s": 60,
    "priority": 50
  }'

# å“åº”
{
  "request_id": "abc123-def",
  "provider": "qwen",
  "status": "queued",
  "cached": false,
  "parallel": false
}

# å¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰ Provider
curl -X POST http://localhost:8765/api/ask \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "@all",
    "message": "2+2=?",
    "aggregation_strategy": "first_success"
  }'
```

---

## ğŸ”§ Phase 7 åŠŸèƒ½

### API è®¤è¯

```bash
# åˆ›å»º API Key
curl -X POST http://localhost:8765/api/admin/keys \
  -H "Content-Type: application/json" \
  -d '{"name": "my-app", "rate_limit_rpm": 100}'

# ä½¿ç”¨ API Key
curl -X POST http://localhost:8765/api/ask \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"provider": "qwen", "message": "ä½ å¥½"}'
```

### é™æµ

- ä»¤ç‰Œæ¡¶ç®—æ³•
- é»˜è®¤ï¼š60 è¯·æ±‚/åˆ†é’Ÿ
- æ”¯æŒæŒ‰ Key è‡ªå®šä¹‰é™æµ
- æ”¯æŒçªå‘æµé‡

### å“åº”ç¼“å­˜

```bash
# æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
curl http://localhost:8765/api/cache/stats

# å“åº”
{
  "hits": 15,
  "misses": 45,
  "hit_rate": 0.25,
  "total_entries": 30,
  "expired_entries": 5
}

# æ¸…é™¤ç¼“å­˜
curl -X DELETE http://localhost:8765/api/cache
```

### Prometheus æŒ‡æ ‡

```bash
curl http://localhost:8765/metrics

# è¾“å‡º
gateway_requests_total{provider="qwen",status="completed"} 150
gateway_request_latency_seconds_bucket{provider="qwen",le="5.0"} 120
gateway_cache_hits_total 15
gateway_cache_misses_total 45
```

---

## ğŸ–¥ï¸ Phase 8 Web UI

Phase 8 å¼•å…¥äº†å…¨é¢çš„ Web UIï¼Œç”¨äºç®¡ç†å’Œç›‘æ§ Gatewayã€‚

### Web UI åŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| **ä»ªè¡¨ç›˜** | å®æ—¶ç»Ÿè®¡ã€Provider çŠ¶æ€ã€è¯·æ±‚æ—¶é—´çº¿ |
| **è¯·æ±‚ç®¡ç†** | åˆ†é¡µã€æœç´¢ã€è¿‡æ»¤ã€é‡è¯•å¤±è´¥è¯·æ±‚ |
| **æµ‹è¯•æ§åˆ¶å°** | äº¤äº’å¼ API æµ‹è¯•ï¼Œæ”¯æŒæ¨¡æ¿ |
| **Provider å¯¹æ¯”** | å¹¶æ’å¯¹æ¯” Provider å“åº” |
| **API Key ç®¡ç†** | åˆ›å»ºã€åˆ—è¡¨ã€åˆ é™¤ Keyï¼Œä¸€é”®å¤åˆ¶ |
| **é…ç½®ç®¡ç†** | æŸ¥çœ‹å’Œç®¡ç† Gateway é…ç½® |

### Phase 8A: å…³é”®ä¿®å¤

| åŠŸèƒ½ | æè¿° |
|------|------|
| **å¤åˆ¶åˆ°å‰ªè´´æ¿** | API Key ä¸€é”®å¤åˆ¶ |
| **åˆ†é¡µ** | è¯·æ±‚è¡¨æ ¼åˆ†é¡µï¼Œå¯é…ç½®æ¯é¡µæ•°é‡ |
| **åŠ è½½çŠ¶æ€** | å¼‚æ­¥æ“ä½œçš„éª¨æ¶å±å’ŒåŠ è½½åŠ¨ç”» |
| **é”™è¯¯å¤„ç†** | ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œå‹å¥½çš„é”™è¯¯æç¤º |

### Phase 8B: ç”¨æˆ·ä½“éªŒå¢å¼º

| åŠŸèƒ½ | æè¿° |
|------|------|
| **ç¡®è®¤å¯¹è¯æ¡†** | é˜²æ­¢è¯¯åˆ é™¤æ“ä½œ |
| **Toast æ”¹è¿›** | å¯å…³é—­çš„é€šçŸ¥ï¼Œå¸¦å…³é—­æŒ‰é’® |
| **è¯·æ±‚æœç´¢** | æŒ‰å†…å®¹ã€Providerã€çŠ¶æ€è¿‡æ»¤è¯·æ±‚ |
| **é”®ç›˜å¿«æ·é”®** | `1-6` åˆ‡æ¢æ ‡ç­¾ï¼Œ`R` åˆ·æ–°ï¼Œ`T` æµ‹è¯•ï¼Œ`?` å¸®åŠ© |

### Phase 8C: åŠŸèƒ½æ‰©å±•

| åŠŸèƒ½ | æè¿° |
|------|------|
| **Provider æ§åˆ¶** | ä» UI å¯ç”¨/ç¦ç”¨ Provider |
| **ç¼“å­˜ç®¡ç†** | æŸ¥çœ‹ç»Ÿè®¡ã€æ¸…é™¤ç¼“å­˜ã€æ¸…ç†è¿‡æœŸæ¡ç›® |
| **æµ‹è¯•æ¨¡æ¿** | ä¿å­˜å’ŒåŠ è½½å¸¸ç”¨æµ‹è¯•é…ç½® |
| **è¯·æ±‚é‡è¯•** | ä¸€é”®é‡è¯•å¤±è´¥çš„è¯·æ±‚ |

### Phase 8D: é«˜çº§åŠŸèƒ½

| åŠŸèƒ½ | æè¿° |
|------|------|
| **æˆæœ¬è¿½è¸ª** | åŸºäº Token ä½¿ç”¨é‡ä¼°ç®—æˆæœ¬ |
| **å‘Šè­¦ç³»ç»Ÿ** | å¯é…ç½®çš„å»¶è¿Ÿã€æˆåŠŸç‡ã€é˜Ÿåˆ—æ·±åº¦å‘Šè­¦ |
| **ä¸»é¢˜åˆ‡æ¢** | æ·±è‰²/æµ…è‰²ä¸»é¢˜ï¼ŒlocalStorage æŒä¹…åŒ– |
| **å›½é™…åŒ–** | å®Œæ•´çš„ä¸­è‹±æ–‡æœ¬åœ°åŒ–æ”¯æŒ |

### è®¿é—® Web UI

```bash
# å¯åŠ¨ Gateway
python3 -m lib.gateway.gateway_server --config ~/.ccb/gateway.yaml

# æ‰“å¼€ Web UI
open http://localhost:8765/
```

### æ–°å¢ API ç«¯ç‚¹ (Phase 8)

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| `POST` | `/api/admin/providers/{name}/enable` | å¯ç”¨ Provider |
| `POST` | `/api/admin/providers/{name}/disable` | ç¦ç”¨ Provider |
| `DELETE` | `/api/cache/cleanup` | æ¸…ç†è¿‡æœŸç¼“å­˜æ¡ç›® |

---

## ğŸ“¦ Provider

### Provider çŸ©é˜µ

| Provider | å‘½ä»¤ | åç«¯ | æœ€ä½³ç”¨é€” | çŠ¶æ€ |
|----------|------|------|----------|------|
| **Gemini** | `gw-gemini` | WezTerm | å‰ç«¯ã€å®¡æŸ¥ | âœ… |
| **DeepSeek** | `gw-deepseek` | CLI æ‰§è¡Œ | æ·±åº¦æ¨ç† | âœ… |
| **Codex** | `gw-codex` | CLI æ‰§è¡Œ | åç«¯ã€API | âœ… |
| **OpenCode** | `gw-opencode` | CLI æ‰§è¡Œ | é€šç”¨ç¼–ç  | âœ… |
| **Kimi** | `gw-kimi` | CLI æ‰§è¡Œ | ä¸­æ–‡ã€é•¿ä¸Šä¸‹æ–‡ | âœ… |
| **Qwen** | `gw-qwen` | CLI æ‰§è¡Œ | å¤šè¯­è¨€ | âœ… |
| **iFlow** | `gw-iflow` | CLI æ‰§è¡Œ | å·¥ä½œæµ | âœ… |

> **æ³¨æ„**ï¼šClaude æ˜¯ä¸»è„‘ï¼ˆOrchestratorï¼‰ï¼Œä¸å‚ä¸ä»»åŠ¡è°ƒåº¦ã€‚

---

## ğŸ”§ å®‰è£…

### å‰ç½®æ¡ä»¶

- **Python 3.9+**
- **WezTerm**ï¼ˆæ¨èï¼‰æˆ– tmux
- Provider CLIï¼š`codex`, `gemini`, `opencode`, `deepseek`, `kimi`, `qwen`, `iflow`

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/LeoLin990405/ai-router-ccb.git ~/.local/share/codex-dual

# å®‰è£…ä¾èµ–
pip install fastapi uvicorn pyyaml aiohttp prometheus-client

# æ·»åŠ åˆ° PATH
export PATH="$HOME/.local/share/codex-dual/bin:$PATH"

# åŠ è½½ shell å‡½æ•°
echo 'source ~/.ccb/gateway-functions.sh' >> ~/.zshrc
```

### é…ç½®

```yaml
# ~/.ccb/gateway.yaml
server:
  host: "127.0.0.1"
  port: 8765

default_provider: "qwen"

providers:
  gemini:
    enabled: true
    backend_type: "cli_exec"
    cli_command: "gemini"
    timeout_s: 300
  # ... å…¶ä»– provider
```

---

## ğŸ“Š æ€§èƒ½

### Provider å»¶è¿Ÿï¼ˆå…¸å‹å€¼ï¼‰

| Provider | å¹³å‡å»¶è¿Ÿ | ç”¨é€” |
|----------|----------|------|
| Kimi | ~9s | ä¸­æ–‡å†…å®¹ |
| Qwen | ~14s | å¤šè¯­è¨€ |
| iFlow | ~17s | å·¥ä½œæµ |
| Codex | ~19s | ä»£ç ç”Ÿæˆ |
| OpenCode | ~27s | é€šç”¨ç¼–ç  |
| Gemini | ~31s | å‰ç«¯ã€å®¡æŸ¥ |
| DeepSeek | ~47s | æ·±åº¦æ¨ç† |

---

## ğŸ™ è‡´è°¢

- **[bfly123/claude_code_bridge](https://github.com/bfly123/claude_code_bridge)** - åŸå§‹å¤š AI åä½œæ¡†æ¶
- **[Grafbase/Nexus](https://github.com/grafbase/nexus)** - AI ç½‘å…³æ¶æ„çµæ„Ÿ

---

## ğŸ‘¥ è´¡çŒ®è€…

- **Leo** ([@LeoLin990405](https://github.com/LeoLin990405)) - é¡¹ç›®è´Ÿè´£äºº
- **Claude** (Anthropic Claude Opus 4.5) - æ¶æ„ä¸å®ç°

---

## ğŸ“„ è®¸å¯è¯

MIT License - è§ [LICENSE](LICENSE)

---

<p align="center">
  <sub>äººä¸ AI åä½œæ„å»º</sub>
  <br>
  <sub>â­ å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™ä¸ª Starï¼</sub>
</p>
